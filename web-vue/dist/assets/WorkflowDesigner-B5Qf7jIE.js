import{d as D,r as y,a as B,c as k,e as l,w as t,f as r,o as _,b as d,k as a,F as U,G as S,C as F,D as I,E as x,H as R,I as W,t as b}from"./index-BM9eJQOU.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"page-container"},G={class:"flex-between"},H={class:"workflow-designer"},O={class:"designer-toolbar"},T=["onMousedown"],j={class:"node-header"},q={class:"node-content"},A=D({__name:"WorkflowDesigner",setup(J){const w=y(),v=y([]),c=y(!1),i=B({id:"",type:"start",x:0,y:0});let u=null,g={x:0,y:0};function m(n){const e={id:`node_${Date.now()}`,type:n,x:100+v.value.length*150,y:100,config:{}};v.value.push(e)}function C(n){return{start:"开始",llm:"LLM",condition:"条件",plugin:"插件",end:"结束"}[n]||n}function V(n,e){u=n,g.x=e.clientX-n.x,g.y=e.clientY-n.y;const s=p=>{u&&(u.x=p.clientX-g.x,u.y=p.clientY-g.y)},f=()=>{u=null,document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",f)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",f)}function L(){c.value=!1,x.success("节点配置已保存")}function N(){const n={nodes:v.value,edges:[]};console.log("保存工作流:",n),x.success("工作流已保存（当前为演示版本）")}return(n,e)=>{const s=r("el-button"),f=r("el-input"),p=r("el-form-item"),z=r("el-form"),M=r("el-dialog"),E=r("el-card");return _(),k("div",Y,[l(E,{class:"card-container"},{header:t(()=>[d("div",G,[e[10]||(e[10]=d("span",null,"工作流设计器",-1)),l(s,{type:"primary",size:"small",onClick:N},{default:t(()=>[...e[9]||(e[9]=[a("保存工作流",-1)])]),_:1})])]),default:t(()=>[d("div",H,[d("div",O,[l(s,{size:"small",onClick:e[0]||(e[0]=o=>m("start"))},{default:t(()=>[...e[11]||(e[11]=[a("开始节点",-1)])]),_:1}),l(s,{size:"small",onClick:e[1]||(e[1]=o=>m("llm"))},{default:t(()=>[...e[12]||(e[12]=[a("LLM节点",-1)])]),_:1}),l(s,{size:"small",onClick:e[2]||(e[2]=o=>m("condition"))},{default:t(()=>[...e[13]||(e[13]=[a("条件节点",-1)])]),_:1}),l(s,{size:"small",onClick:e[3]||(e[3]=o=>m("plugin"))},{default:t(()=>[...e[14]||(e[14]=[a("插件节点",-1)])]),_:1}),l(s,{size:"small",onClick:e[4]||(e[4]=o=>m("end"))},{default:t(()=>[...e[15]||(e[15]=[a("结束节点",-1)])]),_:1})]),d("div",{class:"designer-canvas",ref_key:"canvasRef",ref:w},[(_(!0),k(U,null,S(v.value,o=>(_(),k("div",{key:o.id,class:W(["workflow-node",o.type]),style:R({left:o.x+"px",top:o.y+"px"}),onMousedown:$=>V(o,$)},[d("div",j,b(C(o.type)),1),d("div",q,b(o.label||o.id),1)],46,T))),128))],512)]),l(M,{modelValue:c.value,"onUpdate:modelValue":e[8]||(e[8]=o=>c.value=o),title:"配置节点",width:"500px"},{footer:t(()=>[l(s,{onClick:e[7]||(e[7]=o=>c.value=!1)},{default:t(()=>[...e[16]||(e[16]=[a("取消",-1)])]),_:1}),l(s,{type:"primary",onClick:L},{default:t(()=>[...e[17]||(e[17]=[a("确定",-1)])]),_:1})]),default:t(()=>[l(z,{model:i,"label-width":"100px"},{default:t(()=>[l(p,{label:"节点标签"},{default:t(()=>[l(f,{modelValue:i.label,"onUpdate:modelValue":e[5]||(e[5]=o=>i.label=o)},null,8,["modelValue"])]),_:1}),i.type==="llm"?(_(),F(p,{key:0,label:"节点配置"},{default:t(()=>[l(f,{modelValue:i.config.prompt,"onUpdate:modelValue":e[6]||(e[6]=o=>i.config.prompt=o),type:"textarea",rows:3,placeholder:"提示词"},null,8,["modelValue"])]),_:1})):I("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})])}}}),Q=X(A,[["__scopeId","data-v-abbb7058"]]);export{Q as default};
